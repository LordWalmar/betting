// Generated by CoffeeScript 1.7.1
(function() {
  $(function() {
    var add_needScript_question, add_needScript_request;
    add_needScript_request = function() {
      var $category, $form_request, $type;
      $form_request = $("#form_request");
      $type = $form_request.find("select[name=type]");
      $category = $form_request.find("select[name=category_id]");
      $.getJSON("http://master-promo.test.stroytorgi.ru/faq/type_list.json", function(data) {
        $.each(data.data, function(tid) {
          return $type.append("<option value=\"" + tid + "\">" + this + "</option>");
        });
        return $type.wbtFormStyler();
      });
      return $.getJSON("http://master-promo.test.stroytorgi.ru/faq/category_list.json", function(data) {
        $.each(data.data, function(cid) {
          return $category.append("<option value=\"" + cid + "\" data-slug=\"" + this.transliteration + "\">" + this.name + "</option>");
        });
        return $category.wbtFormStyler();
      });
    };
    add_needScript_question = function() {
      var $form_question, $type;
      $form_question = $("#form_question");
      $type = $form_question.find("select[name=type]");
      return $.getJSON("http://master-promo.test.stroytorgi.ru/faq/type_list.json", function(data) {
        $.each(data.data, function(tid) {
          return $type.append("<option value=\"" + tid + "\">" + this + "</option>");
        });
        return $type.wbtFormStyler();
      });
    };
    $(".new_presentation").fancybox({
      margin: 0,
      wrapCSS: "form_background",
      padding: 0,
      width: "100%",
      height: "inherit",
      autoHeight: true,
      closeBtn: false,
      autoSize: false,
      fitToView: false,
      ajax: {
        complete: function(jqXHR, textStatus) {
          return wbtFallbackerRun();
        }
      }
    });
    $("#new_seminar").fancybox({
      margin: 0,
      wrapCSS: "form_background",
      padding: 0,
      width: "100%",
      height: "inherit",
      autoHeight: true,
      closeBtn: false,
      autoSize: false,
      fitToView: false,
      ajax: {
        complete: function(jqXHR, textStatus) {
          return wbtFallbackerRun();
        }
      }
    });
    $("#new_question").fancybox({
      margin: 0,
      wrapCSS: "form_background",
      padding: 0,
      width: "100%",
      height: "inherit",
      autoHeight: true,
      closeBtn: false,
      autoSize: false,
      fitToView: false,
      ajax: {
        complete: function(jqXHR, textStatus) {
          wbtFallbackerRun();
          return add_needScript_question();
        }
      }
    });
    $("#new_request").fancybox({
      margin: 0,
      wrapCSS: "form_background",
      padding: 0,
      width: "100%",
      height: "inherit",
      autoHeight: true,
      closeBtn: false,
      autoSize: false,
      fitToView: false,
      ajax: {
        complete: function(jqXHR, textStatus) {
          wbtFallbackerRun();
          return add_needScript_request();
        }
      }
    });
    return $("#header_signin").fancybox({
      margin: 0,
      wrapCSS: "form_background",
      padding: 0,
      width: "100%",
      height: "inherit",
      autoHeight: true,
      closeBtn: false,
      autoSize: false,
      fitToView: false,
      ajax: {
        complete: function(jqXHR, textStatus) {
          wbtFallbackerRun();
          add_needScript_request();
        }
      }
    });
  });

}).call(this);
